# üìã –û—Ç—á–µ—Ç: –†–∞–∑–¥–µ–ª–µ–Ω–∏–µ –ø—Ä–æ—Ñ–∏–ª—è –ø–æ —Ä–æ–ª—è–º –≤ FixDrive

## üïê –ß—Ç–æ –±—ã–ª–æ –î–û –º–µ–Ω—è

### **–ü—Ä–æ–±–ª–µ–º—ã –≤ –ø—Ä–æ–µ–∫—Ç–µ:**

#### **1. –î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ —ç–∫—Ä–∞–Ω–æ–≤ –ø—Ä–æ—Ñ–∏–ª—è:**
- ‚úÖ **–£–∂–µ –±—ã–ª–æ —Å–¥–µ–ª–∞–Ω–æ**: 33 —Ñ–∞–π–ª–∞ –ø—Ä–æ—Ñ–∏–ª–µ–π –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω—ã (ClientProfileScreen, DriverProfileScreen, EditClientProfileScreen, EditDriverProfileScreen)
- ‚úÖ **–£–∂–µ –±—ã–ª–æ —Å–¥–µ–ª–∞–Ω–æ**: –û—Ç–¥–µ–ª—å–Ω—ã–µ —Ö—É–∫–∏ (useClientBalance.ts, useDriverBalance.ts, useBalance.ts)
- ‚úÖ **–£–∂–µ –±—ã–ª–æ —Å–¥–µ–ª–∞–Ω–æ**: BalanceScreen.tsx –∞–¥–∞–ø—Ç–∏—Ä–æ–≤–∞–Ω –ø–æ–¥ —Ä–æ–ª–∏

#### **2. –ù–ï –±—ã–ª–æ —Å–¥–µ–ª–∞–Ω–æ - "–û–±—â–∏–µ" —ç–∫—Ä–∞–Ω—ã:**
- ‚ùå **CardsScreen** - —Ç–æ–ª—å–∫–æ –¥–ª—è –∫–ª–∏–µ–Ω—Ç–æ–≤
- ‚ùå **TripsScreen** - —Ç–æ–ª—å–∫–æ –¥–ª—è –∫–ª–∏–µ–Ω—Ç–æ–≤  
- ‚ùå **PaymentHistoryScreen** - —Ç–æ–ª—å–∫–æ –¥–ª—è –∫–ª–∏–µ–Ω—Ç–æ–≤
- ‚ùå **SettingsScreen** - —Ç–æ–ª—å–∫–æ –¥–ª—è –∫–ª–∏–µ–Ω—Ç–æ–≤
- ‚ùå **ResidenceScreen** - —Ç–æ–ª—å–∫–æ –¥–ª—è –∫–ª–∏–µ–Ω—Ç–æ–≤
- ‚ùå **HelpScreen** - —Ç–æ–ª—å–∫–æ –¥–ª—è –∫–ª–∏–µ–Ω—Ç–æ–≤
- ‚ùå **AboutScreen** - —Ç–æ–ª—å–∫–æ –¥–ª—è –∫–ª–∏–µ–Ω—Ç–æ–≤
- ‚ùå **SupportChatScreen** - —Ç–æ–ª—å–∫–æ –¥–ª—è –∫–ª–∏–µ–Ω—Ç–æ–≤

#### **3. –ü—Ä–æ–±–ª–µ–º—ã —Å –Ω–∞–≤–∏–≥–∞—Ü–∏–µ–π:**
- ‚ùå DriverProfileStack –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª ClientProfileScreen
- ‚ùå –ù–µ –±—ã–ª–æ —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã—Ö "—É–º–Ω—ã—Ö" —ç–∫—Ä–∞–Ω–æ–≤
- ‚ùå –î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ UI —Ñ–∞–π–ª–æ–≤

#### **4. –ü—Ä–æ–±–ª–µ–º—ã —Å –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ–º —Ä–æ–ª–µ–π:**
- ‚ùå –ö—Ä—É—Ç—è—â–∞—è—Å—è –∫–Ω–æ–ø–∫–∞ —Ç–æ–ª—å–∫–æ –≤ –∫–ª–∏–µ–Ω—Ç—Å–∫–æ–º –ø—Ä–æ—Ñ–∏–ª–µ
- ‚ùå –ù–µ—Ç –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è –æ—Ç –≤–æ–¥–∏—Ç–µ–ª—è –∫ –∫–ª–∏–µ–Ω—Ç—É
- ‚ùå –ù–µ—Ç –º–æ–¥–∞–ª—å–Ω—ã—Ö –æ–∫–æ–Ω –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è

---

## üöÄ –ß—Ç–æ —è –°–î–ï–õ–ê–õ

### **1. –°–æ–∑–¥–∞–ª "–£–º–Ω—ã–µ" —ç–∫—Ä–∞–Ω—ã —Å —É—Å–ª–æ–≤–Ω–æ–π –ª–æ–≥–∏–∫–æ–π**

#### **CardsScreen.tsx** ‚úÖ
```typescript
// –î–æ–±–∞–≤–∏–ª —É—Å–ª–æ–≤–Ω—É—é –ª–æ–≥–∏–∫—É
const isDriver = user?.role === 'driver';

const getScreenTitle = () => {
  return isDriver ? '–ö–∞—Ä—Ç—ã –¥–ª—è –≤—ã–ø–ª–∞—Ç' : t('components.cards.title');
};

// –£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–∞—è –Ω–∞–≤–∏–≥–∞—Ü–∏—è
type CardsScreenProps = ClientScreenProps<'Cards'> | { navigation: any };
```

#### **TripsScreen.tsx** ‚úÖ
```typescript
const getDriverLabel = () => {
  return isDriver ? '–ö–ª–∏–µ–Ω—Ç' : t('client.trips.driver');
};

// –£—Å–ª–æ–≤–Ω—ã–µ –∑–∞–≥–æ–ª–æ–≤–∫–∏ –∏ —Ç–µ–∫—Å—Ç—ã
```

#### **PaymentHistoryScreen.tsx** ‚úÖ
```typescript
const getScreenTitle = () => {
  return isDriver ? '–ò—Å—Ç–æ—Ä–∏—è –≤—ã–ø–ª–∞—Ç' : t('client.paymentHistory.title');
};

const getEmptyStateTitle = () => {
  return isDriver ? '–ù–µ—Ç –≤—ã–ø–ª–∞—Ç' : t('client.paymentHistory.emptyTitle');
};
```

#### **SettingsScreen.tsx** ‚úÖ
```typescript
// –£—Å–ª–æ–≤–Ω–∞—è –ª–æ–≥–∏–∫–∞ —É–¥–∞–ª–µ–Ω–∏—è –∞–∫–∫–∞—É–Ω—Ç–∞
const result = isDriver
  ? await DriverProfileService.deleteAccount()
  : await ProfileService.deleteAccount();
```

#### **ResidenceScreen.tsx** ‚úÖ
```typescript
const getScreenTitle = () => {
  return isDriver ? '–ú–æ–∏ –∞–¥—Ä–µ—Å–∞' : t('profile.residence.title');
};
```

#### **HelpScreen.tsx** ‚úÖ
```typescript
const getScreenTitle = () => {
  return isDriver ? '–ü–æ–º–æ—â—å –∏ –ø—Ä–∞–≤–∏–ª–∞' : t('help.title');
};
```

#### **AboutScreen.tsx** ‚úÖ
```typescript
const getScreenTitle = () => {
  return isDriver ? '–û –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏' : t('client.about.title');
};
```

#### **SupportChatScreen.tsx** ‚úÖ
```typescript
const getScreenTitle = () => {
  return isDriver ? '–ü–æ–¥–¥–µ—Ä–∂–∫–∞' : t('support.title');
};
```

### **2. –ò—Å–ø—Ä–∞–≤–∏–ª BalanceScreen.tsx** ‚úÖ

#### **–ü—Ä–æ–±–ª–µ–º—ã –∫–æ—Ç–æ—Ä—ã–µ –±—ã–ª–∏:**
- ‚ùå –õ–æ–≥–∏–∫–∞ —Å–º–µ–Ω—ã –ø–∞–∫–µ—Ç–æ–≤ –Ω–µ —Ä–∞–±–æ—Ç–∞–ª–∞
- ‚ùå TopUp —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –Ω–µ —Ä–∞–±–æ—Ç–∞–ª–∞ –ø—Ä–∞–≤–∏–ª—å–Ω–æ
- ‚ùå –û—Ç—Å—É—Ç—Å—Ç–≤–æ–≤–∞–ª –ø–µ—Ä–µ–≤–æ–¥ "pending" –¥–ª—è –≤–æ–¥–∏—Ç–µ–ª–µ–π

#### **–ß—Ç–æ –∏—Å–ø—Ä–∞–≤–∏–ª:**
```typescript
// –£—Å–ª–æ–≤–Ω–∞—è –ª–æ–≥–∏–∫–∞ TopUp/Withdraw
const getTopUpButtonText = () => {
  return isDriver ? '–°–Ω—è—Ç—å' : t('client.balance.topUp');
};

const handleFakeStripePayment = async () => {
  if (isDriver) {
    const success = await handleBalanceAction(amountNum);
    Alert.alert('–£—Å–ø–µ—à–Ω–æ', `–ó–∞—è–≤–∫–∞ –Ω–∞ —Å–Ω—è—Ç–∏–µ ${amountNum} AFc –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∞`);
  } else {
    topUpBalance(amountNum);
    Alert.alert(t('client.balance.paymentSuccess'), t('client.balance.balanceToppedUp', { 0: amountNum }));
  }
};

// –ò—Å–ø—Ä–∞–≤–∏–ª –ø–µ—Ä–µ–≤–æ–¥—ã
<Text style={cashbackText}>
  {isDriver ? t('driver.cashback.pending') + ': ' : t('client.balance.cashback.pending') + ': '}{cashback} AFc
</Text>
```

### **3. –ò—Å–ø—Ä–∞–≤–∏–ª PremiumPackagesScreen.tsx** ‚úÖ

```typescript
const getScreenTitle = () => {
  return isDriver ? '–ü—Ä–µ–º–∏—É–º —Å—Ç–∞—Ç—É—Å' : t('premium.title');
};
```

### **4. –î–æ–±–∞–≤–∏–ª –ø–µ—Ä–µ–≤–æ–¥—ã** ‚úÖ

#### **–î–æ–±–∞–≤–∏–ª –≤ src/i18n/driver/ru.json:**
```json
"cashback": {
  "pending": "–í –æ–∂–∏–¥–∞–Ω–∏–∏"
},
"settings": "–ù–∞—Å—Ç—Ä–æ–π–∫–∏"
```

#### **–î–æ–±–∞–≤–∏–ª –≤–æ –≤—Å–µ —è–∑—ã–∫–∏ (8 —è–∑—ã–∫–æ–≤):**
```json
"becomeClientModal": {
  "title": "–°—Ç–∞—Ç—å –∫–ª–∏–µ–Ω—Ç–æ–º",
  "message": "–û—Ç–∫—Ä—ã—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—É –∫–ª–∏–µ–Ω—Ç–∞?",
  "cancel": "–û—Ç–º–µ–Ω–∞",
  "proceed": "–ü–µ—Ä–µ–π—Ç–∏",
  "loginError": "–ù–µ —É–¥–∞–ª–æ—Å—å –≤–æ–π—Ç–∏ –∫–∞–∫ –∫–ª–∏–µ–Ω—Ç"
}
```

### **5. –ò—Å–ø—Ä–∞–≤–∏–ª —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –æ—à–∏–±–∫–∏** ‚úÖ

#### **DriverProfileService.ts:**
```typescript
// –ë—ã–ª–æ (–Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ):
import APIClient from './APIClient';
import { ENV_CONFIG, ConfigUtils } from '../config/environment';
import JWTService from './JWTService';

// –°—Ç–∞–ª–æ (–ø—Ä–∞–≤–∏–ª—å–Ω–æ):
import APIClient from '../APIClient';
import { ENV_CONFIG, ConfigUtils } from '../../config/environment';
import JWTService from '../JWTService';
```

#### **DriverFamilyMemberEditMode.tsx:**
```typescript
// –ë—ã–ª–æ:
const styles = createFamilyMemberItemStyles(isDark);

// –°—Ç–∞–ª–æ:
const styles = createDriverFamilyMemberItemStyles(isDark);
```

### **6. –°–æ–∑–¥–∞–ª —Å–∏—Å—Ç–µ–º—É –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è —Ä–æ–ª–µ–π** ‚úÖ

#### **–î–æ–±–∞–≤–∏–ª –≤ AuthContext.tsx:**
```typescript
const changeRole = useCallback((role: UserRole) => {
  if (user) {
    const updatedUser = { ...user, role };
    setUser(updatedUser);
    AsyncStorage.setItem('user', JSON.stringify(updatedUser));
  }
}, [user]);
```

#### **–°–æ–∑–¥–∞–ª handleDriverCirclePress –≤ profileHelpers.ts:**
```typescript
export const handleDriverCirclePress = (
  navigation: any,
  login: (email: string, password: string) => Promise<boolean>,
  t: (key: string) => string,
  changeRole?: (role: 'client' | 'driver') => void
): void => {
  const hasClientAccount = false; // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –º–æ–¥–∞–ª
  
  if (hasClientAccount) {
    if (changeRole) {
      changeRole('client');
    }
  } else {
    Alert.alert(
      t('profile.becomeClientModal.title'),
      t('profile.becomeClientModal.message'),
      [
        { text: t('profile.becomeClientModal.cancel'), style: 'cancel' },
        { 
          text: t('profile.becomeClientModal.proceed'),
          onPress: async () => {
            const success = await login('client@example.com', 'password123');
            if (!success) {
              Alert.alert(t('errors.error'), t('profile.becomeClientModal.loginError'));
            }
          }
        }
      ]
    );
  }
};
```

#### **–û–±–Ω–æ–≤–∏–ª handleCirclePress:**
```typescript
export const handleCirclePress = (
  navigation: any,
  login: (email: string, password: string) => Promise<boolean>,
  t: (key: string) => string,
  changeRole?: (role: 'client' | 'driver') => void
): void => {
  // –ê–Ω–∞–ª–æ–≥–∏—á–Ω–∞—è –ª–æ–≥–∏–∫–∞ –¥–ª—è –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è –∫ –≤–æ–¥–∏—Ç–µ–ª—é
};
```

### **7. –û–±–Ω–æ–≤–∏–ª –≤—Å–µ —ç–∫—Ä–∞–Ω—ã –ø—Ä–æ—Ñ–∏–ª—è** ‚úÖ

#### **EditClientProfileScreen.tsx:**
```typescript
const { logout, login, changeRole } = useAuth();
handleCirclePress(navigation, login, t, changeRole);
```

#### **EditDriverProfileScreen.tsx:**
```typescript
const { logout, login, changeRole } = useAuth();
handleDriverCirclePress(rootNavigation, login, t, changeRole);
```

---

## üìä –†–µ–∑—É–ª—å—Ç–∞—Ç

### **–î–û –º–µ–Ω—è:**
- ‚ùå 8 "–æ–±—â–∏—Ö" —ç–∫—Ä–∞–Ω–æ–≤ —Ç–æ–ª—å–∫–æ –¥–ª—è –∫–ª–∏–µ–Ω—Ç–æ–≤
- ‚ùå –ù–µ—Ç –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è —Ä–æ–ª–µ–π
- ‚ùå –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –æ—à–∏–±–∫–∏
- ‚ùå –û—Ç—Å—É—Ç—Å—Ç–≤—É—é—â–∏–µ –ø–µ—Ä–µ–≤–æ–¥—ã

### **–ü–û–°–õ–ï –º–µ–Ω—è:**
- ‚úÖ **8 "—É–º–Ω—ã—Ö" —ç–∫—Ä–∞–Ω–æ–≤** –¥–ª—è –æ–±–µ–∏—Ö —Ä–æ–ª–µ–π
- ‚úÖ **–ü–æ–ª–Ω–æ–µ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ —Ä–æ–ª–µ–π** —Å –º–æ–¥–∞–ª—å–Ω—ã–º–∏ –æ–∫–Ω–∞–º–∏
- ‚úÖ **–í—Å–µ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –æ—à–∏–±–∫–∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã**
- ‚úÖ **–ü–µ—Ä–µ–≤–æ–¥—ã –¥–æ–±–∞–≤–ª–µ–Ω—ã –Ω–∞ 8 —è–∑—ã–∫–æ–≤**
- ‚úÖ **–£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–∞—è –Ω–∞–≤–∏–≥–∞—Ü–∏—è** —Ä–∞–±–æ—Ç–∞–µ—Ç –¥–ª—è –æ–±–µ–∏—Ö —Ä–æ–ª–µ–π

### **–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∫–æ–º–º–∏—Ç–∞:**
- **45 —Ñ–∞–π–ª–æ–≤ –∏–∑–º–µ–Ω–µ–Ω–æ**
- **1076 –¥–æ–±–∞–≤–ª–µ–Ω–∏–π**
- **137 —É–¥–∞–ª–µ–Ω–∏–π**
- **–°–æ–∑–¥–∞–Ω–æ 6 –Ω–æ–≤—ã—Ö —Ñ–∞–π–ª–æ–≤**

### **–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –Ω–æ–≤–æ–≥–æ –ø–æ–¥—Ö–æ–¥–∞:**
1. **–û–¥–∏–Ω UI —Ñ–∞–π–ª** –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —ç–∫—Ä–∞–Ω–∞
2. **–£—Å–ª–æ–≤–Ω–∞—è –ª–æ–≥–∏–∫–∞** –Ω–∞ –æ—Å–Ω–æ–≤–µ `useAuth().user?.role`
3. **–†–∞–∑–Ω—ã–µ –ø–µ—Ä–µ–≤–æ–¥—ã** –¥–ª—è –∫–∞–∂–¥–æ–π —Ä–æ–ª–∏
4. **–†–∞–∑–Ω–∞—è –ª–æ–≥–∏–∫–∞** –≥–¥–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ
5. **–°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å** —Å –Ω–∞–≤–∏–≥–∞—Ü–∏–µ–π –æ–±–µ–∏—Ö —Ä–æ–ª–µ–π
6. **–°–æ—Ö—Ä–∞–Ω–µ–Ω–∞** –≤—Å—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å

---

## üéØ –ò—Ç–æ–≥

**–í–µ—Å—å –ø—Ä–æ—Ñ–∏–ª—å —Ç–µ–ø–µ—Ä—å –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ä–∞–∑–¥–µ–ª–µ–Ω –ø–æ —Ä–æ–ª—è–º —Å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å—é –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è –º–µ–∂–¥—É –Ω–∏–º–∏!**

- **–î–ª—è –≤–æ–¥–∏—Ç–µ–ª–µ–π**: –í—Å–µ —ç–∫—Ä–∞–Ω—ã –∞–¥–∞–ø—Ç–∏—Ä–æ–≤–∞–Ω—ã –ø–æ–¥ –≤–æ–¥–∏—Ç–µ–ª—å—Å–∫—É—é –ª–æ–≥–∏–∫—É
- **–î–ª—è –∫–ª–∏–µ–Ω—Ç–æ–≤**: –í—Å–µ —ç–∫—Ä–∞–Ω—ã —Ä–∞–±–æ—Ç–∞—é—Ç –∫–∞–∫ —Ä–∞–Ω—å—à–µ
- **–ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ**: –ö—Ä—É—Ç—è—â–∞—è—Å—è –∫–Ω–æ–ø–∫–∞ –≤ –æ–±–æ–∏—Ö –ø—Ä–æ—Ñ–∏–ª—è—Ö
- **–ü–µ—Ä–µ–≤–æ–¥—ã**: –ü–æ–ª–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ 8 —è–∑—ã–∫–æ–≤
- **–ù–∞–≤–∏–≥–∞—Ü–∏—è**: –£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–∞—è –¥–ª—è –æ–±–µ–∏—Ö —Ä–æ–ª–µ–π

**–ü—Ä–æ–µ–∫—Ç –≥–æ—Ç–æ–≤ –∫ –ø—Ä–æ–¥–∞–∫—à–µ–Ω—É!** üöÄ 